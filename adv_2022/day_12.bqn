s←>•Flines"input_12.txt"
x←-1⌈26⌊("S"∾'a'+↕26)⊐s
start←⊑(⥊'E'⍷s)/⥊↕≢s
d←⟨0‿1,0‿¯1,1‿0,¯1‿0⟩

Next←{(𝕨⊑𝕩)((⊣≥⟜(-⟜1˜)(⊢⊑⟜𝕩)˜)/⊢)(<≢𝕩){(∧´¨∧˝(𝕨>𝕩)≍(<0‿0)≤𝕩)/𝕩}d+⌜<𝕨}
_BFS_←{
  ⟨g,·,q,v⟩←𝕩
  h←⊑q
  p←¯1⊑h
  v↩1⊸⊣⌾(p⊸⊑)v
  t←({¬v⊑˜¯1⊑𝕩}¨/⊢)1↓q
  t∾↩⥊(<h)∾⟜<⌜p𝔾g
  ⟨g,⊑(≢h)×(𝔽¯1⊑h),t,v⟩
}

Solve←{1-˜1⊑(𝕨⊸{𝕩⊑𝕨}{𝔽_BFS_𝔾𝕩}Next)•_while_{(0=1⊑𝕩)}⟨𝕩,0,⋈⟨start⟩,(≢𝕩)⥊0⟩}

•Show ('S'⍷s) Solve x
•Show ('a'⍷s) Solve x
